<!DOCTYPE html>
<html>
<head>
  <title>Rastreador de Dieta</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>

  <h1>Rastreador de Dieta</h1>

  <div id="diet-sections"></div>

  <h2>Resumen Nutricional</h2>
  <p>Calorías Totales: <span id="total-calories"></span></p>
  <p>Proteínas Totales: <span id="total-protein"></span></p>
  <p>Carbohidratos Totales: <span id="total-carbs"></span></p>
  <p>Grasas Totales: <span id="total-fat"></span></p>
  <p>Fibra Total: <span id="total-fiber"></span></p>

  <h2>Déficit Calórico / Pérdida de Peso</h2>
  <p>Calorías Diarias Recomendadas: 2000</p>
  <p>Déficit Calórico: <span id="calorie-deficit"></span></p>
  <p>Pérdida de Peso Estimada (por semana): <span id="weight-loss"></span></p>

  <script>
    const foods = {
      "manzana": { "calories": 95, "protein": 0.5, "carbs": 25, "fat": 0.3, "fiber": 4.4 },
      "pollo": { "calories": 165, "protein": 31, "carbs": 0, "fat": 3.6, "fiber": 0 },
      "arroz": { "calories": 205, "protein": 4.3, "carbs": 45, "fat": 0.4, "fiber": 0.6 },
      "brócoli": { "calories": 55, "protein": 3.7, "carbs": 11, "fat": 0.6, "fiber": 5.1 },
      "salmón": { "calories": 208, "protein": 20, "carbs": 0, "fat": 13, "fiber": 0 }
    };

    const diet = [
      { "section": "Desayuno", "items": [{ "name": "manzana", "quantity": 1 }, { "name": "arroz", "quantity": 0.5 }] },
      { "section": "Almuerzo", "items": [{ "name": "pollo", "quantity": 150 }, { "name": "brócoli", "quantity": 100 }] },
      { "section": "Cena", "items": [{ "name": "salmón", "quantity": 120 }, { "name": "arroz", "quantity": 80 }] }
    ];

    function createDietSection(sectionData) {
      let tableHTML = `<h3>${sectionData.section}</h3>
                       <table>
                         <thead>
                           <tr>
                             <th>Alimento</th>
                             <th>Cantidad</th>
                             <th>Calorías</th>
                             <th>Proteínas</th>
                             <th>Carbohidratos</th>
                             <th>Grasas</th>
                             <th>Fibra</th>
                           </tr>
                         </thead>
                         <tbody>`;

      sectionData.items.forEach(item => {
        const food = foods[item.name];
        const calories = (food.calories / 100) * item.quantity;
        const protein = (food.protein / 100) * item.quantity;
        const carbs = (food.carbs / 100) * item.quantity;
        const fat = (food.fat / 100) * item.quantity;
        const fiber = (food.fiber / 100) * item.quantity;

        tableHTML += `<tr>
                         <td>${item.name}</td>
                         <td>${item.quantity}g</td>
                         <td>${calories.toFixed(1)}</td>
                         <td>${protein.toFixed(1)}</td>
                         <td>${carbs.toFixed(1)}</td>
                         <td>${fat.toFixed(1)}</td>
                         <td>${fiber.toFixed(1)}</td>
                       </tr>`;
      });

      tableHTML += `</tbody></table>`;
      return tableHTML;
    }

    function calculateTotalNutrition(dietData) {
      let totalCalories = 0;
      let totalProtein = 0;
      let totalCarbs = 0;
      let totalFat = 0;
      let totalFiber = 0;

      dietData.forEach(section => {
        section.items.forEach(item => {
          const food = foods[item.name];
          totalCalories += (food.calories / 100) * item.quantity;
          totalProtein += (food.protein / 100) * item.quantity;
          totalCarbs += (food.carbs / 100) * item.quantity;
          totalFat += (food.fat / 100) * item.quantity;
          totalFiber += (food.fiber / 100) * item.quantity;
        });
      });

      return {
        calories: totalCalories,
        protein: totalProtein,
        carbs: totalCarbs,
        fat: totalFat,
        fiber: totalFiber
      };
    }

    function updateDietSections() {
      const dietSectionsContainer = document.getElementById("diet-sections");
      diet.forEach(sectionData => {
        const sectionHTML = createDietSection(sectionData);
        dietSectionsContainer.innerHTML += sectionHTML;
      });
    }

    function updateNutritionSummary(nutritionData) {
      document.getElementById("total-calories").textContent = nutritionData.calories.toFixed(1);
      document.getElementById("total-protein").textContent = nutritionData.protein.toFixed(1);
      document.getElementById("total-carbs").textContent = nutritionData.carbs.toFixed(1);
      document.getElementById("total-fat").textContent = nutritionData.fat.toFixed(1);
      document.getElementById("total-fiber").textContent = nutritionData.fiber.toFixed(1);
    }

    function calculateDeficit() {
      const totalCalories = calculateTotalNutrition(diet).calories;
      const dailyCalories = 2000; // Ejemplo de calorías diarias necesarias
      const deficit = dailyCalories - totalCalories;
      return deficit;
    }

    updateDietSections();
    const totalNutrition = calculateTotalNutrition(diet);
    updateNutritionSummary(totalNutrition);

    const deficit = calculateDeficit();
    document.getElementById("deficit").textContent = deficit.toFixed(1);
  </script>
</body>
</html>
